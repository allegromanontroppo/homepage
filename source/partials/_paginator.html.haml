.pagination-centered
  %ul.pagination
    %li.arrow{ :class => ('unavailable' unless prev_page) }= link_to '«', prev_page
    
    - (page_number - 3 .. page_number + 3).select{|i| i > 0 && i <= num_pages}.each do |i|
      %li{ :class => ('current' if i == page_number) }
        - p = nil
        - (i ... page_number).each{ p = p ? p.metadata[:locals]['prev_page'] : prev_page }
        - (page_number ... i).each{ p = p ? p.metadata[:locals]['next_page'] : next_page }
        =link_to i, p
          
    %li.arrow{ :class => ('unavailable' unless next_page) }= link_to '»', next_page
