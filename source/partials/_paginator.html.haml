.pagination-centered
  %ul.pagination
    %li.arrow{ :class => ('unavailable' unless prev_page) }= link_to '«', prev_page
    
    - (page_number - 2 .. page_number + 2).select{|i| i > 0 && i <= num_pages}.each do |i|
      %li{ :class => ('current' if i == page_number) }
        - p = nil
        - (i ... page_number).each do p = p ? p.metadata[:locals]['prev_page'] : prev_page; end
        - (page_number ... i).each do p = p ? p.metadata[:locals]['next_page'] : next_page; end
        =link_to "#{i}", p && p.url
          
    %li.arrow{ :class => ('unavailable' unless next_page) }= link_to '»', next_page
